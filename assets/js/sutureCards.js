const productSections = [
  {
    title: "R1 Sutures",
    products: [
      {
        name: "PGA",
        description: `Synthetic absorbable surgical suture <br>   Coated & Braided PGA`,
        pdfLink: "assets/pdfs/PGA.pdf",
        image: "assets/img/Suture/PGA.jpg",
      },
      {
        name: "Lactisorb",
        description: `Synthetic absorbable surgical suture <br> Coated & Braided Polyglactin 910`,
        pdfLink: "assets/pdfs/LACTISORB.pdf",
        image: "assets/img/Suture/LACTISORB.jpg",
      },
      {
        name: "Lactisorb Rapid",
        description: ` Synthetic absorbable surgical suture <br> Coated & Braided Poliglactin 910`,
        pdfLink: "assets/pdfs/LACTISORB-RAPID.pdf",
        image: "assets/img/Suture/LACTISORB_Rapid.jpg",
      },
      {
        name: "PDO",
        description: `Synthetic absorbable surgical suture <br> Monofilament Polydioxanone`,
        pdfLink: "assets/pdfs/PDO.pdf",
        image: "assets/img/Suture/PDO.jpg",
      },
      {
        name: "Monoquick",
        description: `Synthetic absorbable surgical suture <br> Monofilament Poliglecaprone 25`,
        pdfLink: "assets/pdfs/MONOQUICK.pdf",
        image: "assets/img/Suture/MonoQUICK.jpg",
      },
      {
        name: "Polypropylene",
        description: ` Nonabsorbable surgical suture monofilament <br> Polypropylene`,
        pdfLink: "assets/pdfs/POLYPROPYLENE.pdf",
        image: "assets/img/Suture/POLYPROPYLENE.jpg",
      },
      {
        name: "Nylon",
        description: `Non-absorbable surgical suture <br> Monofilament Polyamide`,
        pdfLink: "assets/pdfs/NYLON.pdf",
        image: "assets/img/Suture/NYLON.jpg",
      },
      {
        name: "Silk",
        description: `Natural non-absorbable surgical suture <br> Braided & Coated Silk`,
        pdfLink: "assets/pdfs/SILK.pdf",
        image: "assets/img/Suture/SILK.jpg",
      },
      {
        name: "Polyester-S",
        description: `Non-absorbable surgical suture <br> coated & Braited Polyester`,
        pdfLink: "assets/pdfs/POLYESTER-S.pdf",
        image: "assets/img/Suture/POLYESTER-S.jpg",
      },
      {
        name: "Polyester-CV",
        description: `Non-absorbable surgical suture <br> PTFE coated & Braided Polyester`,
        pdfLink: "assets/pdfs/POLYESTER-CV.pdf",
        image: "assets/img/Suture/POLYESTER-CV.jpg",
      },
      {
        name: "PTFE",
        description: `Nonabsorbable surgical suture<br> monofilament PTFE`,
        pdfLink: "assets/pdfs/PTFE.pdf",
        image: "assets/img/Suture/PTFE.jpg",
      },
      {
        name: "PVDF",
        description: `Nonabsorbable surgical suture <br> monofilament Polyvinylidene fluoride`,
        pdfLink: "assets/pdfs/PVDF.pdf",
        image: "assets/img/Suture/PVDF.jpg",
      },
      {
        name: "Orthopylene",
        description: ` Nonabsorbable surgical suture braided 
                  <br> ultra-high molecular weight Polyethylene 
                  <br> cobraided with polypropylene /Nylon`,
        pdfLink: "assets/pdfs/ORTHOPYLENE.pdf",
        image: "assets/img/Suture/ORTHOPYLENE.jpg",
      },
      {
        name: "Polyamide",
        description: `Non-absorbable surgical suture <br> Braited Polyamide`,
        pdfLink: "assets/pdfs/POLYAMIDE.pdf",
        image: "assets/img/Suture/POLYAMIDE.jpg",
      },
      {
        name: "Supramid",
        description: `Nonabsorbable surgical suture <br> pseudo-monofilament Polyamide`,
        pdfLink: "assets/pdfs/SUPRAMID.pdf",
        image: "assets/img/Suture/SUPRAMID.jpg",
      },
    ],
  },
  {
    title: "Orthopedic Implants",
    products: [
      {
        name: "Knee: Primary Arthroplasty",
        description:
          "An orthopedic implant is a medical device manufactured to replace a missing joint or bone or to support a damaged bone. The medical implant is mainly fabricated using stainless steel and titanium alloys for strength and the plastic coating that is done on it acts as an artificial cartilage.",
        image: "assets/img/Orthopedic/Knee-Primary-Arthroplasty.jpg",
      },
      {
        name: "Knee: Revision and Tumor Endoprosthetics",
        description:
          "Revision of primary knee replacement with simultaneous loss/defect of both cruciate ligaments and instability of the collateral ligaments with femoral and/or tibial bone defects",
        image: "assets/img/Orthopedic/Knee-Revision-and-Tumor.jpg",
      },
      {
        name: "Knee: Arthrodesis",
        description:
          "Tumors in the area of ​​the knee joint - to stiffen the knee joint",
        image: "assets/img/Orthopedic/Knee-Arthrodesis.png",
      },
      {
        name: "Pelvis / hip arthroplasty: Primary hip arthroplasty",
        description: `Non-inflammatory degenerative joint diseases including osteoarthritis and avascular necrosis post-traumatic osteoarthritis femoral neck fractures Rheumatoid arthritis`,
        image: "assets/img/Orthopedic/Pelvis-hip-arthroplasty.jpg",
      },
      {
        name: "Pelvis / hip arthroplasty: Revision and tumor endoprosthetics",
        description: `Non-inflammatory degenerative joint diseases including osteoarthritis and avascular necrosis post-traumatic osteoarthritis femoral neck fractures Rheumatoid arthritis Revision`,
        image: "assets/img/Orthopedic/Revision-and-tumor-endoprosthetics.jpg",
      },
      {
        name: "Shoulder: Primary Arthroplasty",
        description: `Omarthrosis of the shoulder joint defect arthropathy`,
        image: "assets/img/Orthopedic/Shoulder-Primary-Arthroplasty.jpg",
      },
      {
        name: "Shoulder: Revision and tumor endoprosthetics",
        description: `Tumors in the area of ​​the humerus`,
        image: "assets/img/Orthopedic/Shoulder-Revision-and-tumor.jpg",
      },
      {
        name: "Orthopedic Plates & Screws",
        description: `An orthopedic plate is a form of internal fixation used in orthopedic surgery to hold fractures in place to allow bone healing. It includes bone screws to help the orthopedic plate stay in place.`,
        image: "assets/img/Orthopedic/Orthopedic-Plates-Screws.jpg",
      },
    ],
  },
  {
    title: "Safety Syringes",
    products: [
      {
        name: "Safety Syringe",
        description: `A safety syringe is a syringe with a built-in safety mechanism to reduce the risk of needle stick injuries to healthcare workers and others. The needle retracts into the barrel after use and this prevent the RUP (Re-use Protection) & SIP (Sharp Injury Protection)
        <br> <br>
        <strong>
        Sizes:

        0.5ml

        1 ml

        3ml

        5ml`,
        image: "assets/img/Safety-Syringes/Safety-Syringes.jpg",
      },
    ],
  },
  {
    title: "Telemedicine Devices",
    products: [
      {
        name: "Lifebot 5",
        description: `<strong> Military/Defense </strong>
        <br>
        Fully Portable and Integrated Military Tested Telemedicine System Designed For “Rugged” Use Applications`,
        image: "assets/img/Telemedicine/Lifebot-5.jpg",
      },
      {
        name: "Lifebot 6",
        description: `<strong> Acute/EMS </strong>
        <br>
        Mobile Telemedicine System designed for Ambulance, Paramedicine, Rural Clinics, Senior Care, and other settings`,
        image: "assets/img/Telemedicine/LifeBot6.png",
      },
      {
        name: "Clinical Workstation and Mobile Provider Tablet",
        description: `Fully interactive touch screen medical provider workstation with remote client software or audio-video conferencing`,
        image: "assets/img/Telemedicine/Clinical-Workstation-Stand.png",
      },
    ],
  },
  {
    title: "Dental Anesthetics",
    products: [
      {
        name: "Dental Anesthetics",
        description:
          "Dental anesthetics are drugs that cause a lack of feeling or awareness to dull pain to permit surgery and other painful dental procedures.",
        image: "assets/img/Dental-Anesthetics/Dental-Anesthetics.png",
      },
    ],
  },
  {
    title: "Medical Supplies",
    products: [
      {
        name: "Infusion Sets",
        description:
          " The use of IV sets is widely seen as a standard routine in hospitals. It is the fastest mode to infuse medication or replace fluids throughout the body.",
        image: "assets/img/Medical-Supplies/Infusion-Sets.jpg",
      },
      {
        name: "Foley Catheter",
        description:
          "A Foley catheter is a common type of indwelling catheter. It has soft, plastic or rubber tube that is inserted into the bladder to drain the urine",
        image: "assets/img/Medical-Supplies/Foley-Catheter.jpg",
      },
      {
        name: "Hypodermic Needles",
        description:
          "A hypodermic needle is a hollow needle commonly used with a syringe to inject substances into the body or extract fluids from it. They are also used to take liquid from the body, such as in blood transfusion and venipuncture.",
        image: "assets/img/Medical-Supplies/Hypodermic-Needles.jpg",
      },
      {
        name: "IV Catheter",
        description:
          "A device used to draw blood and give treatments, including intravenous fluids, drugs, or blood transfusions.",
        image: "assets/img/Medical-Supplies/IV-Catheter.jpg",
      },
      {
        name: "3Way Stopcock",
        description:
          "Stopcocks are single-use sterile medical products meant to be used in conjunction with other devices during infusion therapy. Their main functions are : To safely stop or restore an infusion flow. To provide two additional ports for administration of any fluid.",
        image: "assets/img/Medical-Supplies/3Way-Stopcock.jpg",
      },
      {
        name: "IV Cannula",
        description:
          "An IV is a small plastic tube, inserted into a vein, usually in your hand or arm. An IV is a small plastic tube, inserted into a vein, usually in your hand or arm.",
        image: "assets/img/Medical-Supplies/IV-Cannula.jpg",
      },
    ],
  },
];

function renderCards(filteredSutures) {
  const grid = document.getElementById("product-grid");
  grid.innerHTML = "";

  filteredSutures.forEach((suture) => {
    const col = document.createElement("div");
    col.className = "col-md-6 col-lg-4";

    col.innerHTML = `
      <div class="card h-100">
        <img src="${suture.image}" alt="${suture.name}" class="product-thumb" />
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">${suture.name}</h5>
          <p class="card-text flex-grow-1">${suture.description}</p>
          <button class="btn btn-primary mt-3" data-pdf="${suture.pdfLink}" data-name="${suture.name}" data-bs-toggle="modal" data-bs-target="#pdfModal">
            View PDF
          </button>
        </div>
      </div>
    `;

    grid.appendChild(col);
  });
}

window.addEventListener("DOMContentLoaded", () => {
  const searchInput = document.getElementById("searchInput");

  searchInput.addEventListener("input", () => {
    const query = searchInput.value.toLowerCase();
    const filtered = sutures.filter(
      (suture) =>
        suture.name.toLowerCase().includes(query) ||
        suture.description.toLowerCase().includes(query)
    );
    renderCards(filtered);
  });

  // PDF Modal
  const pdfModal = document.getElementById("pdfModal");
  const pdfFrame = document.getElementById("pdfFrame");
  const modalTitle = document.getElementById("pdfModalTitle");

  pdfModal.addEventListener("show.bs.modal", (e) => {
    const button = e.relatedTarget;
    const pdfUrl = button.getAttribute("data-pdf");
    const name = button.getAttribute("data-name");

    modalTitle.textContent = `${name} - Suture Details`;
    pdfFrame.src = pdfUrl;
  });

  pdfModal.addEventListener("hidden.bs.modal", () => {
    pdfFrame.src = "";
  });
});

document.addEventListener("click", function (e) {
  if (e.target && e.target.classList.contains("view-pdf-btn")) {
    const pdfUrl = e.target.getAttribute("data-pdf");

    // Check if the device is iPhone
    const isIphone = /iPhone|iPad|iPod/i.test(navigator.userAgent);

    if (isIphone) {
      // Open in a new tab (fullscreen experience)
      window.open(pdfUrl, "_blank");
    } else {
      document.getElementById("pdfFrame").src = pdfUrl;
      const modal = new bootstrap.Modal(document.getElementById("pdfModal"));
      modal.show();
    }
  }
});
